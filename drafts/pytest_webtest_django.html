<!DOCTYPE html>
<html lang="en">

<head>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="http://stefanoapostolico.com/theme/css/pygments.css">


    <link rel="stylesheet" type="text/css" href="http://stefanoapostolico.com/theme/css/style.css">

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Stefano Apostolico">
    <meta name="description" content="Posts and writings by Stefano Apostolico">

    <link href="http://stefanoapostolico.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
          title="Stefano Apostolico's Blog Atom"/>

<meta name="keywords" content="it">
<meta name="robots" content="noindex" />

    <title>
        Stefano Apostolico's Blog
&ndash; py.test and Django    </title>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-11207015-9']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body>
<aside>
    <div id="user_meta">
        <a href="http://stefanoapostolico.com">
            <img src="/images/me.jpg" alt="logo" class="picture">
        </a>
        <!--<h2><a href="http://stefanoapostolico.com">Stefano Apostolico</a></h2>-->
        <p></p>
        <ul>
            <li><a href="http://stefanoapostolico.com/pages/about-me.html">About me</a></li>
            <li><a href="https://twitter.com/s_apostolico" target="_blank">twitter</a></li>
            <li><a href="https://www.linkedin.com/pub/stefano-apostolico/1/683/814" target="_blank">linkedin</a></li>
            <li><a href="https://github.com/saxix" target="_blank">github</a></li>
        </ul>
        <!--<ul class="tag-cloud">-->
            <!---->
            <!--<li class="tag-4"><a href="/tag/django postgis postgresql.html">django postgis postgresql</a></li>-->
            <!---->
        <!--</ul>-->
    </div>
</aside>

<main>
    <header>
        <p>
            <a href="http://stefanoapostolico.com">Index</a> &brvbar; <a href="http://stefanoapostolico.com/archives.html">Archives</a>
            &brvbar; <a href="http://stefanoapostolico.com/feeds/all.atom.xml">Atom</a>
        </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="http://stefanoapostolico.com/drafts/pytest_webtest_django.html">py.test and Django</a></h1>
  </div>
  <div class="article_meta">
        <p>Thu 08 October 2015</p>
    </div>
  <div class="article_text">
    <p>Test django application with py.test and WebTest </p>
<p>I quit using default Django test suite some years ago, sometimes I go back to it to see if something new can change my mind, but up to now I continue to prefer my choice: </p>
<ul>
<li><a href="http://pytest.org/latest/">py.test</a> </li>
<li><a href="http://webtest.pythonpaste.org/en/latest/index.html">WebTest</a> with <a href="http://pypi.python.org/pypi/django-webtest">django-webtest</a>.</li>
<li><a href="https://github.com/paulocheque/django-dynamic-fixture">django-dynamic-fixture</a></li>
</ul>
<h2>Why?</h2>
<p>Several reasons - here's a few:</p>
<ul>
<li>It can run unittest, doctest, and nose, style tests suites, making it ideal for new and legacy projects.</li>
<li>It includes an intuitively named raises context manager for testing exceptions.</li>
<li>You can define fixture arguments to generate baseline data. This is very, very different from Django-style fixtures.</li>
<li>Via pytest.ini you can change the behavior of pytest.</li>
<li>
<p>Integrates nicely with setup.py.</p>
</li>
<li>
<p>WebTest allows you to model a user's experience much more closely as it is smart about mark-up. Instead of hand-crafting GET and POST requests, you can use the WebTest API to follow links and submit forms - this is what users actually do. As a result, your tests accurately capture user stories.</p>
</li>
<li>A corollary to the last point is that writing functional tests with WebTest is both easier and quicker than using Django's test client. It's much simpler to fill in forms that construct complicated arrays of POST data - this is particularly noticable with formsets.</li>
<li>The WebTest response object supports several ways of parsing the response HTML, making it easy to make complicated assertions about the response.</li>
</ul>
<h2>py.test</h2>
<h3>Fixtures as Function Arguments</h3>
  </div>
  <div class="article_meta">
    <!--<p>Posted on: Thu 08 October 2015</p>-->
    <p>Category: <a href="http://stefanoapostolico.com/category/tech.html">tech</a>
 &ndash; Tags:
      <a href="http://stefanoapostolico.com/tag/it.html">it</a>    </p>
  </div>

  <div id="article_comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "drafts/pytest_webtest_django.html";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = 'http://stefanoapostolico.disqus.com.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>


    <div id="ending_message">
        <p>&copy; 2014 Stefano Apostolico. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>.
Member of the <a href="http://internetdefenseleague.org">Internet Defense
                League</a>.</p>
    </div>
</main>
<script type="text/javascript">
  window._idl = {};
  _idl.variant = "banner";
  (function() {
    var idl = document.createElement('script');
    idl.type = 'text/javascript';
    idl.async = true;
    idl.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'members.internetdefenseleague.org/include/?url=' + (_idl.url || '') + '&campaign=' + (_idl.campaign || '') + '&variant=' + (_idl.variant || 'banner');
    document.getElementsByTagName('body')[0].appendChild(idl);
  })();
</script>
</body>
</html>